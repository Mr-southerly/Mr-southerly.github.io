<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-flash.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"github.nanfeng.ink","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":"ture"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="前言 Docker 是 Linux 虚拟化的一种封装，提供简单易用的容器使用接口。 它将应用程序与该程序的依赖，打包在一个文件里面。所以有了 Docker，就不用担心环境问题。  说到虚拟化，很容易想到虚拟器。Docker 和虚拟机有很大的区别，虚拟机一般是在系统上运行的另外一个系统，需要消耗大量的系统资源，而 Docker 可以理解为一个系统上的不同用户，他们都是运行的同一个系统上，性能消耗少，">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker的使用">
<meta property="og:url" content="https://github.nanfeng.ink/2019/12/21/docker%E7%9A%84%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="西洲渡">
<meta property="og:description" content="前言 Docker 是 Linux 虚拟化的一种封装，提供简单易用的容器使用接口。 它将应用程序与该程序的依赖，打包在一个文件里面。所以有了 Docker，就不用担心环境问题。  说到虚拟化，很容易想到虚拟器。Docker 和虚拟机有很大的区别，虚拟机一般是在系统上运行的另外一个系统，需要消耗大量的系统资源，而 Docker 可以理解为一个系统上的不同用户，他们都是运行的同一个系统上，性能消耗少，">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/jpeg/12924220/1620183865237-badc9a02-2367-4885-a277-ac5cd5957a1f.jpeg#clientId=u5e03a6ab-2b16-4&from=drop&id=uf7e03740&margin=%5Bobject%20Object%5D&name=runlike.jpg&originHeight=281&originWidth=733&originalType=binary&size=56741&status=done&style=none&taskId=ub505ecbb-eb95-4c38-ae33-adec91ce5a3">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/png/12924220/1620183858060-e12449da-d2d5-4434-83a1-e072d47aa9cd.png#clientId=u5e03a6ab-2b16-4&from=drop&id=u40c9710a&margin=%5Bobject%20Object%5D&name=docker-stats.png&originHeight=103&originWidth=917&originalType=binary&size=3817&status=done&style=none&taskId=u69d24b0c-e333-4128-b6dd-57a47bc76fb">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2021/png/12924220/1620183870165-7f303689-4ab2-4543-a8bb-8bc544352f3f.png#clientId=u5e03a6ab-2b16-4&from=drop&id=u53b3d9f2&margin=%5Bobject%20Object%5D&name=image-tomcat.png&originHeight=296&originWidth=1309&originalType=binary&size=37075&status=done&style=none&taskId=u6142b636-f9f7-4aa5-98c2-d08b67b9136">
<meta property="article:published_time" content="2019-12-21T01:58:05.000Z">
<meta property="article:modified_time" content="2023-04-18T05:14:06.024Z">
<meta property="article:author" content="南风">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="虚拟机">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2021/jpeg/12924220/1620183865237-badc9a02-2367-4885-a277-ac5cd5957a1f.jpeg#clientId=u5e03a6ab-2b16-4&from=drop&id=uf7e03740&margin=%5Bobject%20Object%5D&name=runlike.jpg&originHeight=281&originWidth=733&originalType=binary&size=56741&status=done&style=none&taskId=ub505ecbb-eb95-4c38-ae33-adec91ce5a3">

<link rel="canonical" href="https://github.nanfeng.ink/2019/12/21/docker%E7%9A%84%E4%BD%BF%E7%94%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Docker的使用 | 西洲渡</title>
  


  <script data-pjax>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1ecc71e997f35d4936f80db0f307d20a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>



</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">西洲渡</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">一只还没迈入IC领域的小菜鸡</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">31</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">44</span></a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.nanfeng.ink/2019/12/21/docker%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="南风">
      <meta itemprop="description" content="陌上人如玉，公子世无双">
    </span>
	<meta name="referrer" content="no-referrer" />
    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="西洲渡">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Docker的使用
        </h1>

        <div class="post-meta">



			
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-12-21 09:58:05" itemprop="dateCreated datePublished" datetime="2019-12-21T09:58:05+08:00">2019-12-21</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AF%87/" itemprop="url" rel="index"><span itemprop="name">服务篇</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Docker 是 Linux 虚拟化的一种封装，提供简单易用的容器使用接口。 它将应用程序与该程序的依赖，打包在一个文件里面。所以有了 Docker，就不用担心环境问题。</p>
<p>说到虚拟化，很容易想到虚拟器。Docker 和虚拟机有很大的区别，虚拟机一般是在系统上运行的另外一个系统，需要消耗大量的系统资源，而 Docker 可以理解为一个系统上的不同用户，他们都是运行的同一个系统上，性能消耗少，而且启动速度很快。</p>
<h2 id="Linux-下安装"><a href="#Linux-下安装" class="headerlink" title="Linux 下安装"></a>Linux 下安装</h2><p>这里使用的 Centos7，Docker 要求 CentOS 系统的内核版本高于 3.10，如果你的内核版本过低需要升级内核才能支持 Docker</p>
<p>注意 OpenVZ 架构的 VPS 是不支持升级内核的，KVM 是支持的，或者使用云服务器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">more /etc/centos-release # 查看centos系统版本</span><br><span class="line">uname -r # 查看内核版本</span><br></pre></td></tr></table></figure>


<p>如果没有源的话导入下官方的源就行了，<a target="_blank" rel="noopener" href="https://docs.docker.com/install/linux/docker-ce/centos/">这里是官方的教程</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 卸载旧版本</span><br><span class="line">yum -y remove docker docker-common docker-selinux docker-engine</span><br><span class="line">yum update</span><br><span class="line"># 安装</span><br><span class="line">yum install docker</span><br></pre></td></tr></table></figure>


<p>安装完毕输入<code>docker version</code>查看是否安装完毕，分为客户端和服务端。</p>
<p>在安装 docker 时，默认的安装位置是<code>/var/lib/docker</code>，后面下载的镜像也是在这个位置</p>
<p>如果提示 Cannot connect to the Docker daemon 表示服务端没启动，通过<code>systemctl start docker</code>命令启动 docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Client:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26</span><br><span class="line"> Package version: docker-1.13.1-91.git07f3374.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.10.3</span><br><span class="line"> Git commit:      07f3374/1.13.1</span><br><span class="line"> Built:           Wed Feb 13 17:10:12 2019</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"></span><br><span class="line">Server:</span><br><span class="line"> Version:         1.13.1</span><br><span class="line"> API version:     1.26 (minimum version 1.12)</span><br><span class="line"> Package version: docker-1.13.1-91.git07f3374.el7.centos.x86_64</span><br><span class="line"> Go version:      go1.10.3</span><br><span class="line"> Git commit:      07f3374/1.13.1</span><br><span class="line"> Built:           Wed Feb 13 17:10:12 2019</span><br><span class="line"> OS/Arch:         linux/amd64</span><br><span class="line"> Experimental:    false</span><br></pre></td></tr></table></figure>


<h2 id="Windows-下安装"><a href="#Windows-下安装" class="headerlink" title="Windows 下安装"></a>Windows 下安装</h2><p>有两个 Docker for Windows 和 Docker Toolbox，二者的工作原理都是在虚拟机的 Linux 环境下安装 Docker</p>
<p>Docker for Windows 使用的是 Windows 自带的 Hyper-v 虚拟技术，因此对系统的要求是 Win10 专业版</p>
<p>Docker Toolbox 则使用的是 Virtualbox，如果本机已经安装过 Virtualbox 在安装过程中可以选择不安装 Virtualbox，</p>
<p>通过 <code>docker-machine</code> 命令，可以创建一个 运行 docker 的运行环境，通过<code>docker-machine env</code>切换不同的 docker 环境。从这里也可以看到在 windows 上执行的 docker 命令其实是转发到 Linux 里面的(TCP)</p>
<p>注意 docker-machine 在创建虚拟机的过程中会去 Github 上下载最新的系统镜像，由于网路原因等待过程可能会很久，也可以自己手动去下载然后放到<code>~/.docker/machine/cache/boot2docker.iso</code>。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Docker安装目录下，在git-bash通过执行脚本创建</span></span><br><span class="line">./start.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## 也可以手动创建运行环境</span></span><br><span class="line">docker-machine create -d virtualbox default</span><br><span class="line">docker-machine start default</span><br><span class="line">docker-machine <span class="built_in">env</span> default</span><br><span class="line">docker-machine <span class="built_in">ls</span></span><br><span class="line">docker-machine ssh default</span><br></pre></td></tr></table></figure>


<p>创建完毕，<code>docker info</code> 若显示无法连接服务端，由于每次重启 IP 会变化，需要更新下 IP 到环境变量里面，再重启终端就好了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-machine restart default</span><br><span class="line">docker-machine env default # 将default机器的连接IP写到环境变量</span><br><span class="line"># 关闭终端重新进入刷新最新的环境变量，再次查看应该就成功了</span><br><span class="line">docker info</span><br></pre></td></tr></table></figure>


<h2 id="Registry-仓库"><a href="#Registry-仓库" class="headerlink" title="Registry 仓库"></a>Registry 仓库</h2><p>docker 镜像托管和 git 仓库托管是很像的，对比 GitHub ，官方的镜像仓库是<a target="_blank" rel="noopener" href="https://hub.docker.com/">Docker Hub</a>，拥有大量的高质量的官方镜像，当拉取镜像时，默认使用的也是改镜像。</p>
<p>由于国内网络环境下载镜像很慢，可以通过配置仓库的镜像地址加速下载</p>
<p>Linux 环境下更改配置文件<code>/etc/docker/daemon.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;https://hub-mirror.c.163.com&quot;</span><span class="punctuation">,</span> <span class="string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>


<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart docker</span><br><span class="line">docker info <span class="comment"># Registry Mirrors</span></span><br></pre></td></tr></table></figure>


<p>Windows 的 Docker Toolbox 环境下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-machine ssh default</span><br><span class="line">sudo vi /var/lib/boot2docker/profile # linux 环境，</span><br><span class="line">docker-machine stop</span><br><span class="line">docker-machine start</span><br></pre></td></tr></table></figure>


<p>修改内容,在 EXTRA_ARGS 参数下追加<code>--registry-mirror</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">EXTRA_ARGS=&#x27;</span><br><span class="line">--label provider=virtualbox</span><br><span class="line">--registry-mirror https://hub-mirror.c.163.com</span><br><span class="line">--registry-mirror https://docker.mirrors.ustc.edu.cn</span><br><span class="line">&#x27;</span><br></pre></td></tr></table></figure>


<p>除了下载外，你也可以推送镜像到仓库，以阿里云的容器镜像服务为例</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker tag nginx registry.cn-hangzhou.aliyuncs.com/xxx/xxx:v1.0</span><br><span class="line">docker login --username=177****@qq.com registry.cn-hangzhou.aliyuncs.com</span><br><span class="line">docker push registry.cn-hangzhou.aliyuncs.com/xxx/xxx:v1.0</span><br></pre></td></tr></table></figure>


<h2 id="image-相关命令"><a href="#image-相关命令" class="headerlink" title="image 相关命令"></a>image 相关命令</h2><p>Docker 把应用程序及其依赖打包在 image 文件里面。</p>
<p>image 文件可以看作是容器的模板。Docker 根据 image 文件生成容器的实例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 列出本地镜像</span><br><span class="line">docker image ls</span><br><span class="line"></span><br><span class="line"># 删除镜像，若改镜像已生成容器实例，需要把所有实例删除才可以删除镜像</span><br><span class="line">docker image rm [imageName]</span><br><span class="line">docker rmi</span><br><span class="line"></span><br><span class="line"># 从远端下载镜像，比如从官方库下载hello-world项目docker image pull [域名/IP][:端口/][用户名/][项目名][:标签]</span><br><span class="line"># 除了项目名外都有默认值，下面的两条命令是等价的</span><br><span class="line">docker image pull docker.io/library/hello-world:latest</span><br><span class="line">docker image pull hello-world</span><br></pre></td></tr></table></figure>


<h2 id="container-相关命令"><a href="#container-相关命令" class="headerlink" title="container 相关命令"></a>container 相关命令</h2><p>image 文件生成的容器实例，本身也是一个文件，称为容器文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 列出本机正在运行的容器，可以得到容器 ID 进行后继操作</span><br><span class="line">docker container ls</span><br><span class="line"># 列出本机所有容器，包括终止运行的容器</span><br><span class="line">docker container ls --all</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 生成一个正在运行的容器实例,本地没有会自动执行 docker image pull</span><br><span class="line"># 运行同一个镜像每次都会生成一个新的容器</span><br><span class="line"># 如 docker container run hello-world，该应用运行完后会自动退出。有些容器不会自动终止，因为提供的是服务</span><br><span class="line"></span><br><span class="line"># --name 自定义容器名字，否则是一个随机串</span><br><span class="line"># --rm 容器停止后自动删除</span><br><span class="line"># -d 开启 Daemon 模式，后台运行</span><br><span class="line"># -p 端口映射，主机端口:容器端口</span><br><span class="line"># -v 路径映射，两边必须都是绝对路径,模式 rw,ro 主机路径:容器路径[:模式],$PWD表示当前外部主机的目录</span><br><span class="line">docker container run [imageName]</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 用来启动已经生成、已经停止运行的容器文件</span><br><span class="line">docker container start/stop/restart [containerID]</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 删除容器实例，若在运行无法删除, 需要先stop</span><br><span class="line">docker container rm [containerID]</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 强制终止容器运行，相当于向容器里面的主进程发出 SIGKILL 信号</span><br><span class="line">docker container kill [containerID]</span><br><span class="line"></span><br><span class="line"># 终止容器运行，相当于向容器里面的主进程发出 SIGTERM 信号，然后过一段时间再发出 SIGKILL 信号</span><br><span class="line"># 应用程序收到 SIGTERM 信号以后，可以自行进行收尾清理工作。</span><br><span class="line">docker container stop [containerID]</span><br></pre></td></tr></table></figure>


<p>如果需要查看容器创建时的启动命令，可以使用 inspect，不过内容太多，可以使用<code>runlike</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker container inspect 3186de74c6be</span><br><span class="line"></span><br><span class="line">pip3 install runlike</span><br><span class="line">runlike 3186de74c6be</span><br></pre></td></tr></table></figure>


<p><img src="https://cdn.nlark.com/yuque/0/2021/jpeg/12924220/1620183865237-badc9a02-2367-4885-a277-ac5cd5957a1f.jpeg#clientId=u5e03a6ab-2b16-4&from=drop&id=uf7e03740&margin=%5Bobject%20Object%5D&name=runlike.jpg&originHeight=281&originWidth=733&originalType=binary&size=56741&status=done&style=none&taskId=ub505ecbb-eb95-4c38-ae33-adec91ce5a3" alt="runlike.jpg"></p>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><p>使用<code>docker stats</code>命令可以方便的看出正在运行的容器的 CPU 占用等信息</p>
<p><img src="https://cdn.nlark.com/yuque/0/2021/png/12924220/1620183858060-e12449da-d2d5-4434-83a1-e072d47aa9cd.png#clientId=u5e03a6ab-2b16-4&from=drop&id=u40c9710a&margin=%5Bobject%20Object%5D&name=docker-stats.png&originHeight=103&originWidth=917&originalType=binary&size=3817&status=done&style=none&taskId=u69d24b0c-e333-4128-b6dd-57a47bc76fb" alt="docker-stats.png"></p>
<p>使用<code>docker search [imageName]</code>用于从镜像仓库搜索可用的镜像</p>
<p>使用<code>docker cp</code>用于容器与主机之间的数据拷贝；<br>如<code>docker cp /www/site01 96f7f14e99ab:/www/</code>将 site01 目录的内容拷贝到 ID 为 96f7f14e99ab 的容器中</p>
<p>使用<code>docker search [imageName]</code>从镜像仓库搜索镜像</p>
<p>使用<code>docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</code>可以运行容器中的脚本，前提是容器正在运行；<br>它有 3 个参数可选<code>-d :分离模式: 在后台运行</code>,<code>-i :即使没有附加也保持STDIN 打开</code>,<code>-t :分配一个伪终端</code>;</p>
<p>比如<code>docker exec -it 8b57a62e9e1f bash</code>实际上是<code>/bin/bash</code>可以进入容器中中断，并可以进行交互。</p>
<p>默认一些常用软件是没有的，想要安装额外的软件可以：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install vi</span><br><span class="line">apt-get install telnet</span><br><span class="line"># ifconfig</span><br><span class="line">apt-get install net-tools</span><br></pre></td></tr></table></figure>


<p>比如<code>docker exec 8b57a62e9e1f env</code>可以查看容器的环境变量</p>
<p>使用<code>docker inspect [conatiner]</code>查看改容器的更多详细信息，比如 IPAddress 字段表示容器的 IP 地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# docker exec app01-mysql env</span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line">HOSTNAME=6faa0da5db0c</span><br><span class="line">MYSQL_ROOT_PASSWORD=123456</span><br><span class="line">GOSU_VERSION=1.7</span><br><span class="line">MYSQL_MAJOR=8.0</span><br><span class="line">MYSQL_VERSION=8.0.15-1debian9</span><br><span class="line">HOME=/root</span><br></pre></td></tr></table></figure>


<h3 id="安装-tomcat"><a href="#安装-tomcat" class="headerlink" title="安装 tomcat"></a>安装 tomcat</h3><p><img src="https://cdn.nlark.com/yuque/0/2021/png/12924220/1620183870165-7f303689-4ab2-4543-a8bb-8bc544352f3f.png#clientId=u5e03a6ab-2b16-4&from=drop&id=u53b3d9f2&margin=%5Bobject%20Object%5D&name=image-tomcat.png&originHeight=296&originWidth=1309&originalType=binary&size=37075&status=done&style=none&taskId=u6142b636-f9f7-4aa5-98c2-d08b67b9136" alt="image-tomcat.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 下载镜像到本地</span><br><span class="line">docker pull tomcat</span><br><span class="line"></span><br><span class="line"># 后台运行</span><br><span class="line"># 自定义名字</span><br><span class="line"># 端口映射</span><br><span class="line"># 路径映射</span><br><span class="line">docker container run -d --name app01 -p 80:8080 -v /home/app01:/usr/local/tomcat/webapps/app01 tomcat</span><br><span class="line"></span><br><span class="line"># 上传代码到/home/app01</span><br><span class="line"></span><br><span class="line"># 重启应用</span><br><span class="line">docker container restart app01</span><br><span class="line"></span><br><span class="line"># 访问http://127.0.0.1:80/index.jsp</span><br></pre></td></tr></table></figure>


<h3 id="安装-mysql"><a href="#安装-mysql" class="headerlink" title="安装 mysql"></a>安装 mysql</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用命令搜寻镜像</span><br><span class="line">docker search mysql</span><br><span class="line">docker pull mysql</span><br><span class="line"># MYSQL_DATABASE=testdb 同时创建一个testdb的数据库</span><br><span class="line">docker run --name app02 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=testdb -d mysql --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br></pre></td></tr></table></figure>


<p>设置外部访问权限</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it app02 /bin/bash</span><br><span class="line">mysql -u root -p</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;123456&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>


<h2 id="容器之间通信"><a href="#容器之间通信" class="headerlink" title="容器之间通信"></a>容器之间通信</h2><p>启动 docker 时，docker 进程会创建一个名为 docker0 的虚拟网桥，用于宿主机与容器之间的通信。当启动一个 docker 容器时，docker 容器将会附加到虚拟网桥上，容器内的报文通过 docker0 向外转发。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker inspect app01</span><br><span class="line">docker inspect app01</span><br><span class="line"># 宿主机通过ifconfig查看网络</span><br></pre></td></tr></table></figure>


<p>多个容器之间通过 IP 通信，缺点是容器重启后自己的 IP 会改变,link 机智很好的解决了这个问题，且可以安全的传递一些连接信息给其它的容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">删除之前创建的容器</span><br><span class="line">docker container stop app01 app02</span><br><span class="line">docker container rm app01 app02</span><br></pre></td></tr></table></figure>


<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 创建mysql容器命名为app02</span><br><span class="line">docker run --name app02 -e MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=testdb -d mysql --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span><br><span class="line"></span><br><span class="line"># 创建tomcat容器命名为app01，并链接到app02</span><br><span class="line">docker container run -d --name app01 -p 80:8080 --link app02:app01db -v /home/app01:/usr/local/tomcat/webapps/app01 tomcat</span><br><span class="line"></span><br><span class="line"># 进入tomcat容器</span><br><span class="line">docker exec -it app01 bash</span><br><span class="line"></span><br><span class="line"># 查看系统变量，可以看到mysql容器内的一些变量</span><br><span class="line">env</span><br><span class="line"></span><br><span class="line"># 测试连通</span><br><span class="line"># 64 bytes from app01db (172.17.0.2): icmp_seq=1 ttl=64 time=0.949 ms</span><br><span class="line">ping app01db</span><br><span class="line">telnet app01db 3306</span><br></pre></td></tr></table></figure>


<p>Java 代码测试数据库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String JDBC_DRIVER = &quot;com.mysql.jdbc.Driver&quot;;</span><br><span class="line">String DB_URL = &quot;jdbc:mysql://app01db:3306/testdb&quot;;</span><br><span class="line">String USER = &quot;root&quot;;</span><br><span class="line">String PASS = &quot;123456&quot;;</span><br></pre></td></tr></table></figure>


<p>如果报错<code>Unable to load authentication plugin &#39;caching_sha2_password&#39;</code>表示 mysql 版本太高，jdbc 太低，问题不大，百度即可解决。但是说明已经可以访问到数据库了。</p>
<h2 id="Docker-Compose-工具"><a href="#Docker-Compose-工具" class="headerlink" title="Docker Compose 工具"></a>Docker Compose 工具</h2><p>综上，容器之间通信，命令行提供容器之间的连接信息不便于管理。</p>
<p>Docker 公司推出了 Docker Compose，可以管理多个 Docker 容器组成一个应用。你需要定义一个 YAML 格式的 compose 配置文件。默认是 docker-compose.xml，或者使用-f 命令指定配置文件</p>
<p>安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure>


<p>新建 docker-compose.yml 文件，写入下面的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">app02:</span><br><span class="line">  image: mysql:5.7</span><br><span class="line">  environment:</span><br><span class="line">    - MYSQL_ROOT_PASSWORD=123456</span><br><span class="line">    - MYSQL_DATABASE=testdb</span><br><span class="line">app01:</span><br><span class="line">  image: tomcat</span><br><span class="line">  links:</span><br><span class="line">    - app02:app01db</span><br><span class="line">  ports:</span><br><span class="line">    - 80:8080</span><br><span class="line">  volumes:</span><br><span class="line">    - /home/app01:/usr/local/tomcat/webapps/app01</span><br></pre></td></tr></table></figure>


<p><code>docker-compose up</code>启动，或者<code>docker-compose up -d</code>在后台运行</p>
<p><code>docker-compose ps</code>产看正在运行的容器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    Name                 Command             State          Ports</span><br><span class="line">-------------------------------------------------------------------------</span><br><span class="line">root_app01_1   catalina.sh run               Up      0.0.0.0:80-&gt;8080/tcp</span><br><span class="line">root_app02_1   docker-entrypoint.sh mysqld   Up      3306/tcp, 33060/tcp</span><br></pre></td></tr></table></figure>


<p>基本的使用就是这样…</p>
<h2 id="自定义镜像"><a href="#自定义镜像" class="headerlink" title="自定义镜像"></a>自定义镜像</h2><p>有两种方式创建属于自己的镜像</p>
<ol>
<li><p> 根据 container 生成镜像<br>进入到一个运行的容器中,比如执行一些操作如安装软件，然后再提交改变生成镜像  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker container exec -it 1a548378cf20 sh</span><br><span class="line">touch demo.txt</span><br><span class="line">exit</span><br><span class="line">docker container stop 1a548378cf20</span><br><span class="line"># docker container diff 1a548378cf20</span><br><span class="line">docker commit -m &quot;install app&quot; 1a548378cf20 customer-image:v1.0.1</span><br><span class="line">docker image ls</span><br><span class="line"># docker push customer-image:v1.0.1</span><br><span class="line"># docker run -p 10086:80 -d customer-image:v1.0.1</span><br></pre></td></tr></table></figure></li>
<li><p> 通过 Dockerfile 来生成自定义镜像<br>注意，每次的 RUN/COPY 等操作都会生成一层，为了镜像的大小可以吧多个 RUN 的命令合并成一个<br>生成镜像，注意所处的目录不要有多余的文件，因为会把当前目录临时拷贝到容器内  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM openjdk:8</span><br><span class="line"># RUN mkdir -p /work</span><br><span class="line">COPY ./demo.jar /work/demo.jar</span><br><span class="line">WORKDIR /work</span><br><span class="line">CMD [ &quot;java&quot;, &quot;-jar&quot;, &quot;demo.jar&quot; ]</span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image build -t spring:v1.0.0 .</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><p>在 Docker Toolbox 环境下，容器绑定宿主机端口后并不能通过 127.0.0.1，因为在 Docker Toolbox 环境下宿主机是虚拟机， 应使用<code>docker-machine ip default</code>去访问</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://docs.docker.com/install/linux/docker-ce/centos/">Docker 官方文档</a></p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html">阮一峰 - Docker 入门教程</a></p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html">阮一峰 - Docker 微服务教程</a></p>
<p><a target="_blank" rel="noopener" href="http://www.runoob.com/docker/docker-command-manual.html">菜鸟教程 - Docker 命令大全</a></p>
<p><a target="_blank" rel="noopener" href="https://vuepress.mirror.docker-practice.com/">Docker 从入门到实践 </a></p>
<p><a target="_blank" rel="noopener" href="https://hui.lu/reduce-docker-image-size/">减小 Docker 镜像体积</a></p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="南风 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.png" alt="南风 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>南风
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://github.nanfeng.ink/2019/12/21/docker%E7%9A%84%E4%BD%BF%E7%94%A8/" title="Docker的使用">https://github.nanfeng.ink/2019/12/21/docker的使用/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"><i class="fa fa-tag"></i> Linux</a>
              <a href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag"><i class="fa fa-tag"></i> 虚拟机</a>
              <a href="/tags/Docker/" rel="tag"><i class="fa fa-tag"></i> Docker</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/10/20/Jekyll+GitHub%E5%8D%9A%E5%AE%A2%E5%A2%9E%E5%8A%A0%E7%AC%AC%E4%B8%89%E6%96%B9livere%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/" rel="prev" title="Jekyll+GitHub博客增加第三方livere评论功能">
      <i class="fa fa-chevron-left"></i> Jekyll+GitHub博客增加第三方livere评论功能
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/01/30/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%80%BB%E7%BB%93/" rel="next" title="Linux常用命令总结">
      Linux常用命令总结 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="lv-container" data-id="city" data-uid="MTAyMC81MzA0Ny8yOTUyMw=="></div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E8%A8%80"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux-%E4%B8%8B%E5%AE%89%E8%A3%85"><span class="nav-number">2.</span> <span class="nav-text">Linux 下安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Windows-%E4%B8%8B%E5%AE%89%E8%A3%85"><span class="nav-number">3.</span> <span class="nav-text">Windows 下安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Registry-%E4%BB%93%E5%BA%93"><span class="nav-number">4.</span> <span class="nav-text">Registry 仓库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#image-%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="nav-number">5.</span> <span class="nav-text">image 相关命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#container-%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="nav-number">6.</span> <span class="nav-text">container 相关命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="nav-number">7.</span> <span class="nav-text">其他命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-tomcat"><span class="nav-number">7.1.</span> <span class="nav-text">安装 tomcat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-mysql"><span class="nav-number">7.2.</span> <span class="nav-text">安装 mysql</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%B9%E5%99%A8%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1"><span class="nav-number">8.</span> <span class="nav-text">容器之间通信</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-Compose-%E5%B7%A5%E5%85%B7"><span class="nav-number">9.</span> <span class="nav-text">Docker Compose 工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F"><span class="nav-number">10.</span> <span class="nav-text">自定义镜像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F"><span class="nav-number">11.</span> <span class="nav-text">注意</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">12.</span> <span class="nav-text">参考</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="南风"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">南风</p>
  <div class="site-description" itemprop="description">陌上人如玉，公子世无双</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Mr-southerly" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Mr-southerly" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:Mr.southerly@qq.com" title="E-Mail → mailto:Mr.southerly@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/5784412625" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;5784412625" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/Zhanfei_Han" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;Zhanfei_Han" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://scholar.google.com.hk/citations?user=C3j6MiYAAAAJ&hl=zh-CN" title="Scholar → https:&#x2F;&#x2F;scholar.google.com.hk&#x2F;citations?user&#x3D;C3j6MiYAAAAJ&amp;hl&#x3D;zh-CN" rel="noopener" target="_blank"><i class="fab fa-google-plus fa-fw"></i>Scholar</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.researchgate.net/profile/Zhanfei-Han" title="Research → https:&#x2F;&#x2F;www.researchgate.net&#x2F;profile&#x2F;Zhanfei-Han" rel="noopener" target="_blank"><i class="fab fa-researchgate fa-fw"></i>Research</a>
      </span>
  </div>



      </div>


		
		<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
		<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
		<div class="widget-wrap">
			<div id="myCanvasContainer" class="widget tagcloud">
			<canvas width="220" height="250" id="resCanvas" style="width=100%">
				<ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3D%E6%89%93%E5%8D%B0/" rel="tag">3D打印</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AD/" rel="tag">AD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Aria2/" rel="tag">Aria2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CNN/" rel="tag">CNN</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cadence/" rel="tag">Cadence</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C%E8%AF%AD%E8%A8%80/" rel="tag">C语言</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frp/" rel="tag">Frp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML-CSS/" rel="tag">HTML+CSS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOS/" rel="tag">IOS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Multisim/" rel="tag">Multisim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PID/" rel="tag">PID</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STM32/" rel="tag">STM32</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SoC/" rel="tag">SoC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spice/" rel="tag">Spice</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SystemVerilog/" rel="tag">SystemVerilog</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VCS/" rel="tag">VCS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Verilog/" rel="tag">Verilog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vim/" rel="tag">Vim</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%A0%E5%8D%9C/" rel="tag">占卜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%99%A8%E4%BB%B6/" rel="tag">器件</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E8%89%BA/" rel="tag">工艺</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E5%AD%97/" rel="tag">数字</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E6%8B%9F/" rel="tag">模拟</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E5%9B%BE/" rel="tag">版图</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A0%B4%E8%A7%A3/" rel="tag">破解</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%9C%AC/" rel="tag">脚本</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/" rel="tag">虚拟机</a><span class="tag-list-count">3</span></li></ul>
			</canvas>
			</div>
		</div>
		
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>


    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">南风</span>
  <a href="https://beian.miit.gov.cn/" target="_blank"> &nbsp;&nbsp;津ICP备19004841号</a> 
</div>



<!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
-->

<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("04/18/2019 15:54:40");
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "你终于来了，我已经在这里等了你 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒了";
    }
setInterval("createtime()",250);
</script>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script data-pjax>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>













    <div id="pjax">
  

  

<script>
NexT.utils.loadComments(document.querySelector('#lv-container'), () => {
  window.livereOptions = {
    refer: location.pathname.replace(CONFIG.root, '').replace('index.html', '')
  };
  (function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
  })(document, 'script');
});
</script>

    </div>
  
  
  
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/clicklove.js"></script>

  <script type="text/javascript" color="0,0,0" opacity='0.5' zIndex="-1" count="99" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>

  <!-- require APlayer -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
  <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <!-- require MetingJS -->
  <script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>



<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
<div class="aplayer" 
	data-id="4941857491" 
	data-server="netease" 
	data-type="playlist" 
	data-fixed="true"	
	data-order="random"
	data-volume="0.18"
	data-list-folded="false"
	data-autoplay="true"
	data-lrc-type="0"
	data-preload="auto"
	data-theme="#cc543a" >
     </div>


</html>




